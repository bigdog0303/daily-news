<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>AI Summary</title>
<meta name="theme-color" content="#0c0c0e" />
<style>
html,body{margin:0;padding:0;height:100%;background:#0c0c0e;color-scheme:dark;-webkit-font-smoothing:antialiased}
*{box-sizing:border-box}
:root{--bg:#0c0c0e;--text:#e9e9ee;--muted:#9fa0a8;--panel2:#17181c;--ring:#2a2b31;--accent:#ffd84a;--accent-ink:#201b07}
body{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text)}
header.top{padding:calc(8px + env(safe-area-inset-top,0)) 16px 10px;border-bottom:1px solid var(--ring)}
h1{margin:0 0 2px;font-size:28px;font-weight:800}
.nav{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.tab{border:1px solid var(--ring);background:#17181c;color:var(--text);padding:8px 12px;border-radius:999px;font-size:14px;text-decoration:none}
.tab.active{background:var(--accent);color:var(--accent-ink);border-color:transparent;font-weight:800}
main{max-width:880px;margin:0 auto;padding:14px 12px 60px}
.card{border:1px solid var(--ring);background:var(--panel2);border-radius:16px;padding:14px;margin:14px 0}
label{display:block;color:var(--muted);font-size:12px;margin-bottom:8px}
textarea{width:100%;min-height:140px;border:1px solid var(--ring);background:#0e0f12;color:var(--text);border-radius:12px;padding:12px;font-family:inherit}
.btn{border:1px solid var(--ring);background:#1f2025;color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer}
.btn.accent{background:var(--accent);color:var(--accent-ink);border-color:transparent;font-weight:800}
.output{white-space:pre-wrap;line-height:1.45}
.small{color:var(--muted);font-size:12px}
</style>
</head>
<body>
<header class="top">
  <h1>AI Summary</h1>
  <div class="nav">
    <a class="tab" href="index.html">Events</a>
    <a class="tab active" href="summary.html">AI Summary</a>
    <a class="tab" href="headlines.html">Headlines</a>
  </div>
</header>

<main>
  <div class="card">
    <label for="input">Paste notes or headlines (one per line). I’ll produce a concise 5-bullet summary.</label>
    <textarea id="input" placeholder="- CPI rises 0.4%...\n- Fed signals no cut...\n- OPEC cuts output..."></textarea>
    <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
      <button id="go" class="btn accent">Summarize</button>
      <span id="status" class="small"></span>
    </div>
  </div>

  <div class="card">
    <div class="small">Summary</div>
    <div id="out" class="output">—</div>
  </div>
</main>

<script>
function summarize(lines){
  // very lightweight extractive "AI-ish" summary:
  // 1) score lines by keyword frequency (TF) ignoring stopwords
  // 2) keep top 5 lines, clean punctuation
  const stop = new Set('the a an and or of to for in on at from by as with is are was were be been being this that those these will would could should not no up down over under into out about after before during across between within without than vs vs.'.split(/\s+/));
  const tokens = [];
  lines.forEach(l=>{
    l.toLowerCase().replace(/[^a-z0-9\s\.\-%]/g,' ').split(/\s+/).forEach(w=>{
      if(!w || stop.has(w) || w.length<2) return;
      tokens.push(w);
    });
  });
  const freq = Object.create(null);
  tokens.forEach(w=>{ freq[w]=(freq[w]||0)+1; });

  const scored = lines.map(l=>{
    const ws = l.toLowerCase().split(/\W+/);
    const s = ws.reduce((acc,w)=>acc+(freq[w]||0),0);
    return { l, s };
  }).sort((a,b)=>b.s-a.s);

  const top = scored.slice(0,5).map(x=>x.l.trim().replace(/^[\-\•\–]\s*/, ''));
  return '• ' + top.join('\n• ');
}

document.getElementById('go').onclick = ()=>{
  const raw = document.getElementById('input').value.trim();
  const status = document.getElementById('status');
  const out = document.getElementById('out');
  if(!raw){ out.textContent='—'; status.textContent=''; return; }
  const lines = raw.split(/\n+/).map(s=>s.trim()).filter(Boolean);
  status.textContent = 'Summarizing…';
  setTimeout(()=>{
    out.textContent = summarize(lines);
    status.textContent = 'Done';
  }, 50);
};
</script>
</body>
</html>
