<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>USD High-Impact Events</title>
  <style>
    :root {
      --bg:#0b0f14; --text:#e7edf3; --muted:#9fb0c3; --card:#121821;
      --accent:#4ade80; --accent2:#60a5fa; --danger:#f87171;
    }
    *{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--text);font:15px/1.45 system-ui,Segoe UI,Roboto}
    header{padding:20px 0;text-align:center}
    h1{margin:0;font-size:22px;font-weight:700}
    .wrap{max-width:700px;margin:0 auto;padding:0 16px}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:16px;margin-bottom:12px}
    .row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .badge{padding:4px 8px;border-radius:999px;font-size:12px;font-weight:600}
    .b-high{background:rgba(248,113,113,.15);color:var(--danger)}
    .muted{color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <header>
    <h1>High-Impact USD Events This Week</h1>
    <div class="muted">From ForexFactory XML feed via Cloudflare Worker</div>
  </header>
  <main class="wrap">
    <div id="list"></div>
    <div id="meta" class="muted" style="margin-top:20px;text-align:center"></div>
  </main>

  <script>
    const API = "https://green-haze.mikaelalexiou.workers.dev";
    async function load(){
      try{
        const r = await fetch(API);
        const j = await r.json();
        const box = document.getElementById('list');
        box.innerHTML = "";
        (j.items||[]).forEach(ev=>{
          const card = document.createElement('div');
          card.className='card';
          card.innerHTML=`
            <div class="row">
              <div><strong>${ev.title}</strong></div>
              <div class="badge b-high">${ev.impact}</div>
            </div>
            <div class="muted">${ev.date} ${ev.time}</div>
            <div class="muted">${ev.currency}</div>`;
          box.appendChild(card);
        });
        document.getElementById('meta').textContent = `Updated: ${new Date(j.now).toLocaleString()}`;
      }catch(e){
        document.getElementById('list').innerHTML = `<div class="card">Error loading feed: ${e}</div>`;
      }
    }
    load();
  </script>
</body>
</html>
